name: ğŸ”„ Keep Streamlit App Alive

on:
  schedule:
    # Ejecutar cada 6 horas (4 veces al dÃ­a)
    - cron: "0 */6 * * *"

  # Permitir ejecuciÃ³n manual
  workflow_dispatch:

jobs:
  keep-alive:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“¡ Ping Streamlit App
        run: |
          echo "ğŸ”„ Pinging Trading Analyzer Pro..."
          response=$(curl -s -o /dev/null -w "%{http_code}" https://trading-analyzer-pro.streamlit.app)

          if [ $response -eq 200 ]; then
            echo "âœ… App is alive and responding (HTTP $response)"
          else
            echo "âš ï¸ App responded with HTTP $response"
          fi

          echo "ğŸ“Š Keep-alive ping completed at $(date)"

      - name: ğŸ” Health Check
        run: |
          echo "ğŸ¥ Performing health check..."
          curl -f https://trading-analyzer-pro.streamlit.app || echo "âŒ Health check failed"
          echo "âœ… Health check completed"

      - name: ğŸ“ Log Status
        run: |
          echo "ğŸ“‹ GitHub Action executed successfully"
          echo "ğŸ•’ UTC Time: $(date -u)"
          echo "ğŸŒ Target: https://trading-analyzer-pro.streamlit.app"
          echo "â° Next run: in 6 hours"
